#!/bin/bash

# Script to reproduce evaluation results for EduMate
# This script documents the evaluation process and provides tools to run evaluations

set -e  # Exit on error

echo "=========================================="
echo "EduMate Evaluation Reproduction Script"
echo "=========================================="
echo ""

# Get the script directory
SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
PROJECT_ROOT="$( cd "$SCRIPT_DIR/../.." && pwd )"
APP_DIR="$PROJECT_ROOT/application"
DOCS_DIR="$APP_DIR/docs"

echo "This script provides documentation and tools for reproducing the evaluation."
echo ""

echo "=========================================="
echo "Evaluation Overview"
echo "=========================================="
echo ""
echo "The evaluation consisted of:"
echo "1. Comparative analysis of baseline AI tools (ChatGPT, Gemini, Perplexity)"
echo "2. User survey feedback (N=14)"
echo "3. System performance metrics"
echo "4. End-to-end testing"
echo ""

echo "=========================================="
echo "1. Comparative Tool Evaluation"
echo "=========================================="
echo ""
echo "Test Prompts: See $DOCS_DIR/FINAL_REPORT.md (Appendix B)"
echo "Scoring Rubric: See $DOCS_DIR/FINAL_REPORT.md (Appendix C)"
echo ""
echo "Test Prompt Categories:"
echo "- Typical Cases (7 prompts)"
echo "- Edge Cases (4 prompts)"
echo "- Failure Cases (5 prompts)"
echo ""
echo "Evaluation Dimensions (0-5 scale):"
echo "1. Mathematical Accuracy"
echo "2. Grade Appropriateness"
echo "3. Educational Quality"
echo "4. Consistency"
echo "5. Safety Filtering"
echo ""
echo "Results Summary:"
echo "- ChatGPT (GPT-5): 24/25"
echo "- Gemini (2.5 Pro): 22/25"
echo "- Perplexity (SONAR): 17/25"
echo ""
echo "To reproduce:"
echo "1. Review test prompts in FINAL_REPORT.md Appendix B"
echo "2. Run each prompt through ChatGPT, Gemini, and Perplexity"
echo "3. Score responses using rubric in Appendix C"
echo "4. Compare with reported scores"
echo ""

echo "=========================================="
echo "2. User Survey Evaluation"
echo "=========================================="
echo ""
echo "Survey Results: See $DOCS_DIR/FINAL_REPORT.md (Section 5.5)"
echo "Survey Screenshots: See $DOCS_DIR/images/"
echo ""
echo "Survey Dimensions:"
echo "- Overall Ease of Use"
echo "- Student Dashboard Clarity"
echo "- S1 Guidance Usefulness"
echo "- S2 Feedback Effectiveness"
echo "- S3 Quiz Grade Matching"
echo "- Progress Tracking Helpfulness"
echo "- Parent Dashboard Usefulness"
echo "- Parent Controls Ease"
echo "- Math Expression Clarity"
echo ""
echo "Key Findings:"
echo "- All respondents found system 'Useful' or 'Very useful'"
echo "- Student Dashboard: 5/5 rated 'Very useful'"
echo "- S1 & S2: All rated 'Useful' or 'Very useful'"
echo "- Primary improvement area: Load speed"
echo ""

echo "=========================================="
echo "3. System Performance Metrics"
echo "=========================================="
echo ""
echo "Performance Results: See $DOCS_DIR/FINAL_REPORT.md (Section 5.6)"
echo ""
echo "API Response Times:"
echo "- /ask (tutoring): 1-2 seconds"
echo "- /quiz/generate (5 questions): 2-3 seconds"
echo "- /quiz/grade: <100ms"
echo ""
echo "Vector Search Performance:"
echo "- Top-3 retrieval: 15-25ms"
echo "- Top-12 retrieval: 30-50ms"
echo ""
echo "Database Query Performance:"
echo "- User authentication: <50ms"
echo "- Quiz attempt tracking: <100ms"
echo "- Statistics aggregation: 200-500ms"
echo ""
echo "Error Rates:"
echo "- RAG retrieval failures: <1%"
echo "- Quiz generation JSON parsing: <2%"
echo "- Database connection failures: <0.5%"
echo ""
echo "To reproduce performance metrics:"
echo "1. Start the backend server"
echo "2. Use the performance testing script (if available)"
echo "3. Monitor response times and memory usage"
echo "4. Compare with reported metrics"
echo ""

echo "=========================================="
echo "4. End-to-End Testing"
echo "=========================================="
echo ""
echo "Test Files: $APP_DIR/e2e/"
echo ""
echo "Test Coverage:"
echo "- Authentication (login/signup)"
echo "- Module navigation (S1, S2, S3)"
echo "- Quiz generation and grading"
echo "- Progress tracking"
echo "- Parent dashboard"
echo ""
echo "To run end-to-end tests:"
echo "1. Ensure backend and frontend are running"
echo "2. Run: npm run test:e2e"
echo "3. Or run with UI: npm run test:e2e:ui"
echo ""

echo "=========================================="
echo "Evaluation Data Files"
echo "=========================================="
echo ""
echo "The following files contain evaluation data:"
echo ""
echo "1. Final Report:"
echo "   $DOCS_DIR/FINAL_REPORT.md"
echo ""
echo "2. Test Prompts:"
echo "   See FINAL_REPORT.md Appendix B"
echo ""
echo "3. Scoring Rubric:"
echo "   See FINAL_REPORT.md Appendix C"
echo ""
echo "4. User Survey Screenshots:"
echo "   $DOCS_DIR/images/S1_Feedback.png"
echo "   $DOCS_DIR/images/S2_Feedback.png"
echo "   $DOCS_DIR/images/S3_Feedback.png"
echo "   $DOCS_DIR/images/progress_Feedback.png"
echo "   $DOCS_DIR/images/pdboard_Feedback.png"
echo "   $DOCS_DIR/images/controls.png"
echo "   $DOCS_DIR/images/math_Feedback.png"
echo "   $DOCS_DIR/images/good.png"
echo "   $DOCS_DIR/images/improve.png"
echo ""

echo "=========================================="
echo "Reproduction Checklist"
echo "=========================================="
echo ""
echo "To fully reproduce the evaluation:"
echo ""
echo "□ Review test prompts (FINAL_REPORT.md Appendix B)"
echo "□ Run comparative evaluation with baseline tools"
echo "□ Score responses using rubric (Appendix C)"
echo "□ Compare scores with reported results"
echo "□ Review user survey results and screenshots"
echo "□ Run system performance tests"
echo "□ Execute end-to-end tests (npm run test:e2e)"
echo "□ Verify error rates and system stability"
echo ""

echo "=========================================="
echo "Notes"
echo "=========================================="
echo ""
echo "- The comparative evaluation was performed manually"
echo "- User survey was conducted with 5 participants"
echo "- Performance metrics were measured during testing"
echo "- All results are documented in FINAL_REPORT.md"
echo ""
echo "For detailed evaluation methodology, see:"
echo "$DOCS_DIR/FINAL_REPORT.md (Section 4: Evaluation Design)"
echo ""

